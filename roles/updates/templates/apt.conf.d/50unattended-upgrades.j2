//============================================================
//Auto-generated by Ansible                                    
//Do not edit manually! Changes will be overwritten.           
//============================================================
Unattended-Upgrade::Origins-Pattern {
    "origin=Debian,codename={{ ansible_distribution_release }},label=Debian-Security";
};

// Automatic cleanup settings
Unattended-Upgrade::Remove-Unused-Kernel-Packages "{{ updates_unattended_upgrades.remove_unused_kernel | default(true) | bool | lower }}";
Unattended-Upgrade::Remove-Unused-Dependencies "{{ updates_unattended_upgrades.remove_unused_dependencies | default(true) | bool | lower }}";
Unattended-Upgrade::Remove-New-Unused-Dependencies "true";
Unattended-Upgrade::AutoFixInterruptedDpkg "true";
Unattended-Upgrade::MinimalSteps "true";

// Automatic reboot settings
Unattended-Upgrade::Automatic-Reboot "{{ updates_unattended_upgrades.auto_reboot | default(false) | bool | lower }}";
{% if updates_unattended_upgrades.auto_reboot | default(false) | bool %}
Unattended-Upgrade::Automatic-Reboot-Time "{{ updates_unattended_upgrades.reboot_time | default('02:00') }}";
Unattended-Upgrade::Automatic-Reboot-WithUsers "true";
{% endif %}

// Package management settings
Unattended-Upgrade::Allow-downgrades "false";
Unattended-Upgrade::Allow-APT-Mark-Fallback "false";
Unattended-Upgrade::Download-Upgradeable-Packages "true";
Unattended-Upgrade::Download-Only "false";

// Package blacklist
Unattended-Upgrade::Package-Blacklist {
{% for package in updates_unattended_upgrades.blacklist_packages | default([]) %}
    "{{ package }}";
{% endfor %}
};

// Email notifications (optional)
// Unattended-Upgrade::Mail "admin@example.com";
// Unattended-Upgrade::MailOnlyOnError "true";
